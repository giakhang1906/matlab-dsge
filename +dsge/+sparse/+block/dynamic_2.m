function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(9, 1);
  T(1)=(y(25)/(y(34)*params(12)*params(7)))^(1/(params(7)-1));
  y(31)=T(1);
  T(2)=(y(24)*(1-params(8))/(y(33)*y(38)*params(6)))^(1/(params(6)-1));
  y(30)=T(2);
  y(28)=y(38)*y(30)^params(6);
  y(29)=params(12)*y(31)^params(7);
  residual(1)=(y(21))-(y(41)-(1-params(5))*y(22));
  residual(2)=(y(20))-((y(22)*(y(25)+y(23)*(y(24)-y(25)))-y(21))/((1+params(10))*y(32)));
  T(3)=1/params(4)*y(33)^(1-params(3))+1/(1-params(4))*y(34)^(1-params(3));
  residual(3)=(y(32))-(T(3)^(1/(1-params(3))));
  T(4)=params(3)/(params(3)-1);
  residual(4)=(y(34))-(T(4)*y(25)/(params(7)*y(29)/y(31)));
  residual(5)=(y(25))-(y(24));
  residual(6)=(y(22))-(T(1)+y(22)*y(23));
  T(5)=y(39)^(-params(2));
  T(6)=y(20)^(-params(2));
  T(7)=T(6)/((1+params(10))*y(32));
  T(8)=params(1)*T(5)/((1+params(10))*y(32))/T(7);
  residual(7)=(1)-(T(8)*(1-params(5)+y(44)+y(42)*(y(43)-y(44))));
  residual(8)=(y(22))-(T(2)/y(23));
  residual(9)=(y(33))-(T(4)*y(24)*(1-params(8))/(params(6)*y(28)/y(30)));
  T(9)=getPowerDeriv(y(24)*(1-params(8))/(y(33)*y(38)*params(6)),1/(params(6)-1),1);
  T(10)=getPowerDeriv(y(25)/(y(34)*params(12)*params(7)),1/(params(7)-1),1);
  T(11)=params(6)*y(28)/y(30)*params(6)*y(28)/y(30);
  T(12)=params(7)*y(29)/y(31)*params(7)*y(29)/y(31);
  T(13)=getPowerDeriv(y(30),params(6),1);
  T(14)=getPowerDeriv(y(31),params(7),1);
  T(15)=getPowerDeriv(T(3),1/(1-params(3)),1);
  T(16)=T(9)*(-(y(24)*(1-params(8))*y(38)*params(6)))/(y(33)*y(38)*params(6)*y(33)*y(38)*params(6));
  T(17)=T(10)*(-(y(25)*params(12)*params(7)))/(y(34)*params(12)*params(7)*y(34)*params(12)*params(7));
if nargout > 3
    g1_v = NaN(28, 1);
g1_v(1)=1;
g1_v(2)=(-((-1)/((1+params(10))*y(32))));
g1_v(3)=(-((-((1+params(10))*(y(22)*(y(25)+y(23)*(y(24)-y(25)))-y(21))))/((1+params(10))*y(32)*(1+params(10))*y(32))));
g1_v(4)=1;
g1_v(5)=(-((1-params(5)+y(44)+y(42)*(y(43)-y(44)))*params(1)*(T(7)*(-(T(5)*(1+params(10))))/((1+params(10))*y(32)*(1+params(10))*y(32))-T(5)/((1+params(10))*y(32))*(-((1+params(10))*T(6)))/((1+params(10))*y(32)*(1+params(10))*y(32)))/(T(7)*T(7))));
g1_v(6)=(-(1/params(4)*getPowerDeriv(y(33),1-params(3),1)*T(15)));
g1_v(7)=(-(T(16)/y(23)));
g1_v(8)=1-T(4)*(-(y(24)*(1-params(8))*params(6)*(y(30)*y(38)*T(13)*T(16)-y(28)*T(16))/(y(30)*y(30))))/T(11);
g1_v(9)=(-(T(15)*1/(1-params(4))*getPowerDeriv(y(34),1-params(3),1)));
g1_v(10)=1-T(4)*(-(y(25)*params(7)*(y(31)*params(12)*T(14)*T(17)-y(29)*T(17))/(y(31)*y(31))))/T(12);
g1_v(11)=(-T(17));
g1_v(12)=(-(y(22)*(1-y(23))/((1+params(10))*y(32))));
g1_v(13)=(-(T(4)*(params(7)*y(29)/y(31)-y(25)*params(7)*(y(31)*params(12)*1/(y(34)*params(12)*params(7))*T(10)*T(14)-y(29)*1/(y(34)*params(12)*params(7))*T(10))/(y(31)*y(31)))/T(12)));
g1_v(14)=1;
g1_v(15)=(-(1/(y(34)*params(12)*params(7))*T(10)));
g1_v(16)=(-(y(22)*(y(24)-y(25))/((1+params(10))*y(32))));
g1_v(17)=(-y(22));
g1_v(18)=(-((-T(2))/(y(23)*y(23))));
g1_v(19)=1;
g1_v(20)=(-((1-params(5)+y(44)+y(42)*(y(43)-y(44)))*params(1)*(-(T(5)/((1+params(10))*y(32))*getPowerDeriv(y(20),(-params(2)),1)/((1+params(10))*y(32))))/(T(7)*T(7))));
g1_v(21)=1-params(5);
g1_v(22)=(-((y(25)+y(23)*(y(24)-y(25)))/((1+params(10))*y(32))));
g1_v(23)=1-y(23);
g1_v(24)=1;
g1_v(25)=(-(y(22)*y(23)/((1+params(10))*y(32))));
g1_v(26)=(-1);
g1_v(27)=(-((1-params(8))/(y(33)*y(38)*params(6))*T(9)/y(23)));
g1_v(28)=(-(T(4)*((1-params(8))*params(6)*y(28)/y(30)-y(24)*(1-params(8))*params(6)*(y(30)*y(38)*(1-params(8))/(y(33)*y(38)*params(6))*T(9)*T(13)-y(28)*(1-params(8))/(y(33)*y(38)*params(6))*T(9))/(y(30)*y(30)))/T(11)));
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 9, 9);
end
end
